(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(17),s=n.n(r),o=n(16),l=n(4),i=Object(a.createContext)(),u=Object(a.createContext)(),j=n(0),d=function(e){var t=e.title,n=e.icon,c=Object(a.useContext)(i),r=Object(a.useContext)(u),s=c.isAuthenticated,l=c.logout,d=c.user,p=r.clearContacts,b=Object(j.jsxs)(a.Fragment,{children:[Object(j.jsxs)("li",{children:["Hello, ",d&&d.name," "]}),Object(j.jsx)("li",{children:Object(j.jsxs)("a",{onClick:function(){l(),p()},href:"#!",children:[Object(j.jsx)("i",{className:"fas fa-sign-out-alt"}),Object(j.jsx)("span",{className:"hide-sm",children:" Logout"})]})})]}),O=Object(j.jsxs)(a.Fragment,{children:[Object(j.jsx)("li",{children:Object(j.jsx)(o.b,{to:"/register",children:"Register"})}),Object(j.jsx)("li",{children:Object(j.jsx)(o.b,{to:"/login",children:"Login"})})]});return Object(j.jsxs)("div",{className:"navbar bg-primary",children:[Object(j.jsxs)("h1",{children:[Object(j.jsx)("i",{className:n})," ",t]}),Object(j.jsx)("ul",{children:s?b:O})]})};d.defaultProps={title:"Contact Keeper",icon:"fas fa-id-card-alt"};var p=d,b=Object(a.createContext)(),O=function(){var e=Object(a.useContext)(b).alerts;return e.length>0&&e.map((function(e){return Object(j.jsxs)("div",{className:"alert alert-".concat(e.type),children:[Object(j.jsx)("i",{className:"fas fa-info-circle"})," ",e.msg]},e.id)}))},h=n(73),m=n(71),x=function(e){var t=e.contact,n=Object(a.useContext)(u),c=n.deleteContact,r=n.setCurrent,s=n.clearCurrent,o=t._id,l=t.name,i=t.email,d=t.phone,p=t.type;return Object(j.jsxs)("div",{className:"card bg-light",children:[Object(j.jsxs)("h3",{className:"text-dark text-left",children:[l," ",Object(j.jsx)("span",{style:{float:"right"},className:"badge "+("professional"===p?"badge-success":"badge-primary"),children:p.charAt(0).toUpperCase()+p.slice(1)})]}),Object(j.jsxs)("ul",{className:"list",children:[i&&Object(j.jsxs)("li",{children:[Object(j.jsx)("i",{className:"fas fa-envelope"})," ",i]}),d&&Object(j.jsxs)("li",{children:[Object(j.jsx)("i",{className:"fas fa-phone"})," ",d]})]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("button",{className:"btn btn-dark btn-sm",onClick:function(){return r(t)},children:"Edit"}),Object(j.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){c(o),s()},children:"Delete"})]})]})},f=n.p+"static/media/spinner.a112b73c.gif",g=function(){return Object(j.jsx)(a.Fragment,{children:Object(j.jsx)("img",{src:f,style:{width:"50px",margin:"auto",display:"block",color:"#333"},alt:"Loading..."})})},y=function(){var e=Object(a.useContext)(u),t=e.contacts,n=e.filtered,c=e.getContacts,r=e.loading;return Object(a.useEffect)((function(){c()}),[]),null!==t&&0===t.length?Object(j.jsx)("h4",{className:"text-center",children:"You have no contacts"}):Object(j.jsx)(a.Fragment,{children:null===t||r?Object(j.jsx)(g,{}):Object(j.jsx)(h.a,{children:null!==n?n.map((function(e){return Object(j.jsx)(m.a,{timeout:500,classNames:"item",children:Object(j.jsx)(x,{contact:e})},e._id)})):t.map((function(e){return Object(j.jsx)(m.a,{timeout:500,classNames:"item",children:Object(j.jsx)(x,{contact:e})},e._id)}))})})},v=n(15),C=n(2),N=n(10),k=function(){var e=Object(a.useContext)(u),t=e.addContact,n=e.clearCurrent,c=e.updateContact,r=e.current;Object(a.useEffect)((function(){i(null!==r?r:{name:"",email:"",phone:"",type:"personal"})}),[e,r]);var s=Object(a.useState)({name:"",email:"",phone:"",type:"personal"}),o=Object(N.a)(s,2),l=o[0],i=o[1],d=l.name,p=l.email,b=l.phone,O=l.type,h=function(){n()},m=function(e){return i(Object(C.a)(Object(C.a)({},l),{},Object(v.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),null===r?t(l):c(l),h()},children:[Object(j.jsx)("h2",{className:"text-light",children:r?"Edit Contact":"Add Contact"}),Object(j.jsx)("input",{type:"text",placeholder:"Name",name:"name",autoComplete:"new-name",outline:"none",value:d,onChange:m}),Object(j.jsx)("input",{type:"email",placeholder:"Email",name:"email",autoComplete:"new-email",outline:"none",value:p,onChange:m}),Object(j.jsx)("input",{type:"text",placeholder:"Phone",name:"phone",autoComplete:"new-phone",outline:"none",value:b,onChange:m}),Object(j.jsx)("h5",{children:"Contact Type"}),Object(j.jsx)("input",{type:"radio",name:"type",value:"personal",checked:"personal"===O,onChange:m})," Personal"," ",Object(j.jsx)("input",{type:"radio",name:"type",value:"professional",checked:"professional"===O,onChange:m})," Professional",Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"submit",value:r?"Update Contact":"Add Contact",className:"btn btn-primary btn-block"})}),r&&Object(j.jsx)("div",{children:Object(j.jsx)("button",{className:"btn btn-light btn-block",onClick:h,children:"Clear"})})]})},E=function(){var e=Object(a.useContext)(u),t=Object(a.useRef)(""),n=e.filterContacts,c=e.clearFilter,r=e.filtered;Object(a.useEffect)((function(){null===r&&(t.current.value="")}));return Object(j.jsx)("form",{children:Object(j.jsx)("input",{ref:t,type:"text",placeholder:"Filter Contacts...",onChange:function(e){e.preventDefault(),""!==t.current.value?n(e.target.value):c()}})})},w=function(){var e=Object(a.useContext)(i).loadUser;return Object(a.useEffect)((function(){e()}),[]),Object(j.jsxs)("div",{className:"grid-2",children:[Object(j.jsx)("div",{children:Object(j.jsx)(k,{})}),Object(j.jsxs)("div",{children:[Object(j.jsx)(E,{}),Object(j.jsx)(y,{})]})]})},A=function(){return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h1",{className:"text-center",children:"About This App"}),Object(j.jsx)("p",{className:"my-1 text-center",children:"This is a full stack React application for keeping track of your contacts"}),Object(j.jsxs)("p",{className:"bg-dark p text-center",children:[Object(j.jsx)("strong",{children:"Version: "})," 1.0.0"]})]})},T=function(e){var t=Object(a.useContext)(b),n=Object(a.useContext)(i),c=t.setAlert,r=n.register,s=n.error,o=n.clearErrors,l=n.isAuthenticated;Object(a.useEffect)((function(){l&&e.history.push("/"),"User already exists"===s&&(c(s,"danger"),o())}),[s,l,e.history]);var u=Object(a.useState)({name:"",email:"",password:"",password2:""}),d=Object(N.a)(u,2),p=d[0],O=d[1],h=p.name,m=p.email,x=p.password,f=p.password2,g=function(e){return O(Object(C.a)(Object(C.a)({},p),{},Object(v.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{className:"form-container",children:[Object(j.jsxs)("h1",{children:["Account ",Object(j.jsx)("span",{className:"text-primary",children:"Register"})]}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===h||""===m||""===x||""===f?c("Please enter all fields","danger"):x!==f?c("Passwords do not match","danger"):x.length<6||f.length<6?c("Passwords must contain at least 6 characters","danger"):r({name:h,email:m,password:x})},children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{type:"text",name:"name",value:h,onChange:g})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Email"}),Object(j.jsx)("input",{type:"email",name:"email",value:m,onChange:g})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Password"}),Object(j.jsx)("input",{type:"password",name:"password",value:x,onChange:g})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Confirm Password"}),Object(j.jsx)("input",{type:"password",name:"password2",value:f,onChange:g})]}),Object(j.jsx)("input",{type:"submit",value:"Register",className:"btn btn-primary btn-block"})]})]})},R=function(e){var t=Object(a.useContext)(b),n=Object(a.useContext)(i),c=t.setAlert,r=n.login,s=n.error,o=n.clearErrors,l=n.isAuthenticated;Object(a.useEffect)((function(){l&&e.history.push("/"),"Invalid Credentials"===s&&(c(s,"danger"),o())}),[s,l,e.history]);var u=Object(a.useState)({email:"",password:""}),d=Object(N.a)(u,2),p=d[0],O=d[1],h=p.email,m=p.password,x=function(e){return O(Object(C.a)(Object(C.a)({},p),{},Object(v.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{className:"form-container",children:[Object(j.jsxs)("h1",{children:["Account ",Object(j.jsx)("span",{className:"text-primary",children:"Login"})]}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===h||""===m?c("Please fill in all fields","danger"):r({email:h,password:m})},children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Email"}),Object(j.jsx)("input",{type:"email",name:"email",value:h,onChange:x})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Password"}),Object(j.jsx)("input",{type:"password",name:"password",value:m,onChange:x})]}),Object(j.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"})]})]})},S=n(36),_=function(e){var t=e.component,n=Object(S.a)(e,["component"]),c=Object(a.useContext)(i),r=c.isAuthenticated,s=c.loading;return Object(j.jsx)(l.b,Object(C.a)(Object(C.a)({},n),{},{render:function(e){return r||s?Object(j.jsx)(t,Object(C.a)({},e)):Object(j.jsx)(l.a,{to:"/login"})}}))},L=n(6),F=n.n(L),P=n(13),I=n(11),U=n.n(I),D=n(21),G="GET_CONTACTS",H="ADD_CONTACT",J="DELETE_CONTACT",M="SET_CURRENT",V="CLEAR_CURRENT",B="UPDATE_CONTACT",K="FILTER_CONTACTS",Y="CLEAR_CONTACTS",q="CLEAR_FILTER",z="CONTACT_ERROR",Q="SET_ALERT",W="REMOVE_ALERT",X="REGISTER_SUCCESS",Z="REGISTER_FAIL",$="USER_LOADED",ee="AUTH_ERROR",te="LOGIN_FAIL",ne="LOGOUT",ae="CLEAR_ERRORS",ce=function(e,t){switch(t.type){case G:return Object(C.a)(Object(C.a)({},e),{},{contacts:t.payload,loading:!1});case H:return Object(C.a)(Object(C.a)({},e),{},{contacts:[t.payload].concat(Object(D.a)(e.contacts)),loading:!1});case B:return Object(C.a)(Object(C.a)({},e),{},{contacts:e.contacts.map((function(e){return e._id===t.payload._id?t.payload:e})),loading:!1});case J:return Object(C.a)(Object(C.a)({},e),{},{contacts:e.contacts.filter((function(e){return e._id!==t.payload})),loading:!1});case Y:return Object(C.a)(Object(C.a)({},e),{},{contacts:null,filtered:null,error:null,current:null});case M:return Object(C.a)(Object(C.a)({},e),{},{current:t.payload});case V:return Object(C.a)(Object(C.a)({},e),{},{current:null});case K:return Object(C.a)(Object(C.a)({},e),{},{filtered:e.contacts.filter((function(e){var n=new RegExp("".concat(t.payload),"gi");return e.name.match(n)||e.email.match(n)}))});case q:return Object(C.a)(Object(C.a)({},e),{},{filtered:null});case z:return Object(C.a)(Object(C.a)({},e),{},{error:t.payload});default:return e}},re=function(e){var t=Object(a.useReducer)(ce,{contacts:null,current:null,filtered:null,error:null}),n=Object(N.a)(t,2),c=n[0],r=n[1],s=function(){var e=Object(P.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get("/api/contacts");case 3:t=e.sent,r({type:G,payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r({type:z,payload:e.t0.response.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(P.a)(F.a.mark((function e(t){var n,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,U.a.post("/api/contacts",t,n);case 4:a=e.sent,r({type:H,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:z,payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(P.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{U.a.delete("/api/contacts/".concat(t)),r({type:J,payload:t})}catch(n){r({type:z,payload:n.response.msg})}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(P.a)(F.a.mark((function e(t){var n,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,U.a.put("/api/contacts/".concat(t._id),t,n);case 4:a=e.sent,r({type:B,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:z,payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(u.Provider,{value:{contacts:c.contacts,current:c.current,filtered:c.filtered,error:c.error,addContact:o,deleteContact:l,setCurrent:function(e){return r({type:M,payload:e})},clearCurrent:function(){return r({type:V})},updateContact:i,filterContacts:function(e){return r({type:K,payload:e})},clearFilter:function(){return r({type:q})},getContacts:s,clearContacts:function(){return r({type:Y})}},children:e.children})},se=function(e){e?U.a.defaults.headers.common["x-auth-token"]=e:delete U.a.defaults.headers.common["x-auth-token"]},oe=function(e,t){switch(t.type){case $:return Object(C.a)(Object(C.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case X:case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(C.a)(Object(C.a)(Object(C.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case Z:case ee:case te:case ne:return localStorage.removeItem("token"),Object(C.a)(Object(C.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case ae:return Object(C.a)(Object(C.a)({},e),{},{error:null});default:return e}},le=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null,error:null},n=Object(a.useReducer)(oe,t),c=Object(N.a)(n,2),r=c[0],s=c[1],o=function(){var e=Object(P.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&se(localStorage.token),e.prev=1,e.next=4,U.a.get("/api/auth");case 4:t=e.sent,s({type:$,payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:ee});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(P.a)(F.a.mark((function e(t){var n,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,U.a.post("/api/users",t,n);case 4:a=e.sent,s({type:X,payload:a.data}),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:Z,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(P.a)(F.a.mark((function e(t){var n,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,U.a.post("/api/auth",t,n);case 4:a=e.sent,s({type:X,payload:a.data}),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:te,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(i.Provider,{value:{token:r.token,isAuthenticated:r.isAuthenticated,loading:r.loading,user:r.user,error:r.error,register:l,loadUser:o,login:u,logout:function(){return s({type:ne})},clearErrors:function(){return s({type:ae})}},children:e.children})},ie=n(72),ue=function(e,t){switch(t.type){case Q:return[].concat(Object(D.a)(e),[t.payload]);case W:return e.filter((function(e){return e.id!==t.payload}));default:return e}},je=function(e){var t=Object(a.useReducer)(ue,[]),n=Object(N.a)(t,2),c=n[0],r=n[1];return Object(j.jsx)(b.Provider,{value:{alerts:c,setAlert:function(e,t){var n=Object(ie.a)();r({type:Q,payload:{msg:e,type:t,id:n}}),setTimeout((function(){return r({type:W,payload:n})}),3e3)}},children:e.children})};n(67);localStorage.token&&se(localStorage.token);var de=function(){return Object(j.jsx)(le,{children:Object(j.jsx)(re,{children:Object(j.jsx)(je,{children:Object(j.jsx)(o.a,{children:Object(j.jsxs)(a.Fragment,{children:[Object(j.jsx)(p,{}),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(O,{}),Object(j.jsxs)(l.d,{children:[Object(j.jsx)(_,{exact:!0,path:"/",component:w}),Object(j.jsx)(l.b,{exact:!0,path:"/about",component:A}),Object(j.jsx)(l.b,{exact:!0,path:"/register",component:T}),Object(j.jsx)(l.b,{exact:!0,path:"/login",component:R})]})]})]})})})})})};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(de,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.38fee5b3.chunk.js.map